# SimjsDelivr ç”¨C++ç¼–å†™çš„ç®€å•çš„jsdelivrå®žçŽ°
## å®žçŽ°
### å·²å®žçŽ°çš„åŠŸèƒ½
* æŒ‰æ–‡æ¡£è¦æ±‚è§£æžé“¾æŽ¥å¹¶è¿”å›žå…¥å£æ–‡ä»¶ï¼Œæ–‡ä»¶åˆ—è¡¨ã€ç‰¹å®šçš„æ–‡ä»¶æˆ–404é”™è¯¯ï¼Œä»¥åŠéƒ¨åˆ†çš„ç‰¹æ®Šç‰ˆæœ¬å·è§£æžï¼Œå¦‚ä½¿ç”¨dist-tags  
* æœªæŒ‡æ˜Žç‰ˆæœ¬å·çš„ï¼Œè‡ªåŠ¨è§£æžåˆ°æœ€æ–°ç‰ˆæœ¬  
* åŸºäºŽä¿®æ”¹æ—¶é—´çš„ç¼“å­˜ç³»ç»Ÿ  
### å®žçŽ°æ€è·¯
é¦–å…ˆç¡®å®š registry url ï¼Œå¹¶åˆ›å»º cache æ–‡ä»¶åˆå§‹åŒ–ç¼“å­˜ç³»ç»Ÿï¼Œå¹¶æ–°å»ºçº¿ç¨‹å‘¨æœŸæ€§è°ƒç”¨ check_cache() æ£€æŸ¥ç¼“å­˜æƒ…å†µã€‚ä½¿ç”¨ [cpp-httplib](https://github.com/yhirose/cpp-httplib) æ¥å¤„ç†è¯·æ±‚ï¼Œ URL è·¯å¾„å…ˆè¢«è§£æžå‡ºåŒ…åï¼Œç„¶åŽç”¨ [libcurl](https://curl.se/libcurl/) ä»ŽæŒ‡å®šçš„ registry èŽ·å–å…ƒæ•°æ®ï¼Œå¹¶å°†åŽŸå§‹çš„ URL è·¯å¾„å’Œå“åº”ä¸€èµ·ä¼ é€’ç»™ response_parse() ï¼Œè¯¥å‡½æ•°ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–å‡ºç‰ˆæœ¬å·å’Œæ–‡ä»¶è·¯å¾„å¹¶åˆ¤æ–­ç‰ˆæœ¬/æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä»¥åŠæ˜¯å¦éœ€è¦è¿”å›žæ–‡ä»¶åˆ—è¡¨ï¼Œå¹¶ç”¨ [nlohmann/json](https://github.com/nlohmann/json) è§£æžå¯¹åº”ç‰ˆæœ¬çš„ tarball ä¸‹è½½åœ°å€å¹¶è¿”å›žã€‚server() é…±ä¼šæ£€æŸ¥æŒ‡å®šçš„åŒ…åœ¨ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨å°±ä¸‹è½½ï¼Œå­˜åœ¨å°±æ›´æ–° tarball çš„ä¿®æ”¹æ—¶é—´æ¥å»¶é•¿ç¼“å­˜çš„è¿‡æœŸæ—¶é—´ã€‚ç„¶åŽä¸´æ—¶åœ°è§£åŽ‹ tarballã€‚server() é…±ç»§ç»­æ ¹æ® response_parse() çš„è¿”å›žå€¼è¿”å›žå¯¹åº”çš„å†…å®¹ï¼Œå‘ç”¨æˆ·è¿”å›žå¯¹åº”çš„å†…å®¹ä¹‹åŽåˆ é™¤ä¸´æ—¶è§£åŽ‹çš„æ–‡ä»¶ã€‚  
#### ç®€å•çš„ç¼“å­˜ç³»ç»Ÿ
æ£€æŸ¥ tarball çš„ä¿®æ”¹æ—¶é—´ï¼Œè¶…è¿‡ä¸€æ®µæ—¶é—´æ— è®¿é—®çš„ä¼šè‡ªåŠ¨åˆ é™¤ä»¥èŠ‚çœç©ºé—´ã€‚ç¼“å­˜çš„è¿‡æœŸæ—¶é—´å’Œæ£€æŸ¥ç¼“å­˜çš„é—´éš”æ—¶é—´éƒ½å®šä¹‰åœ¨ main.h é‡Œã€‚
### ä¸€äº›é—®é¢˜
* åœ¨è§£æž URL æ—¶é€‰æ‹©äº†æ­£åˆ™è¡¨è¾¾å¼ï¼Œå®žçŽ°ç®€å•ä½†å¯è¯»æ€§å¹¶ä¸é«˜ï¼Œç¼–å†™æ­£åˆ™è¡¨è¾¾å¼éš¾åº¦é«˜ï¼Œä¾èµ–AIã€‚ä¸”æ‰©å±•æ€§ä¸é«˜ï¼Œå¯¹ç‰¹æ®Šæ ¼å¼è§£æžæ”¯æŒæ˜¯åœ°ç‹±éš¾åº¦çš„ï¼ˆï¼‰ï¼ˆè¿˜æ˜¯çœ‹çœ‹éš”å£çš„ [boost/url](https://github.com/boostorg/url) å§ï¼ˆ   
* å¯¹äºŽsemveråº“ä½¿ç”¨^/>/<ç­‰ç¬¦å·ä¼šè¢«è®¤ä¸ºç‰ˆæœ¬å·ä¸åˆæ³•  
* ç¼“å­˜å¹¶æœªè¦†ç›– npm åŒ…çš„å…ƒæ•°æ®ï¼ŒæŠŠå…ƒæ•°æ®ä¿å­˜ä¸ºæ–‡ä»¶å¹¶åŠ å…¥ç¼“å­˜ç®¡ç†å³å¯ã€‚  
* å³ä½¿å¯¹äºŽå·²åœ¨ç¼“å­˜ä¸­çš„æ–‡ä»¶ï¼Œæ¯æ¬¡è®¿é—®éƒ½éœ€è¦é‡æ–°å…¨éƒ¨è§£åŽ‹ï¼Œè€Œåªä¿ç•™ tarball å¯ä»¥å‡å°‘ç©ºé—´å ç”¨ã€‚å¯ä»¥è€ƒè™‘åªè§£åŽ‹ç‰¹å®šæ–‡ä»¶/é€šè¿‡ libarchive èŽ·å–æ–‡ä»¶åˆ—è¡¨æ¥å‡å°‘è§£åŽ‹æ—¶é—´  
* ç¼“å­˜å®žçŽ°ç®€å•ï¼Œä½†æ˜¯ä¾èµ–äºŽæ–‡ä»¶ç³»ç»Ÿä¿å­˜æœ€åŽçš„ä¿®æ”¹æ—¶é—´ï¼Œæœªæ¥ä¼šè€ƒè™‘å°†ç¼“å­˜æ•°æ®åº“å†™å…¥jsonæ–‡ä»¶æ¥é¿å…å¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¾èµ–  
* é¡¹ç›®è¯­è¨€é€‰æ‹©äº† C++ ï¼Œä½†å†™èµ·æ¥æ„Ÿè§‰ååˆ†å¤æ‚ï¼ˆäººå¤ªèœï¼‰ã€‚ä¸‹æ¬¡ä¸æ•¢äº†ðŸ˜­  
## ç”Ÿæˆå¼äººå·¥æ™ºèƒ½å£°æ˜Ž
ä½¿ç”¨ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ç”Ÿæˆçš„ä»£ç å‡å·²æ ‡å‡º
### cache_system.cpp
to_unix_timestamp() å’Œ from_unix_timestamp() ä½¿ç”¨ GPT-5 ç”Ÿæˆï¼Œåœ¨ file_time_type å’Œint64_tä¹‹é—´è½¬æ¢ï¼Œä¾¿äºŽè®¡ç®—
### decompressor.cpp
è§£åŽ‹éƒ¨åˆ†è°ƒç”¨ libarchive ,ç´¢æ€§ç›´æŽ¥å…¨éƒ¨ä½¿ç”¨ GPT-5 ç”Ÿæˆ
### file_net_stream.cpp
send_and_delete_file()ä½¿ç”¨ GPT-5 ç”Ÿæˆï¼Œå®žçŽ°æ–‡ä»¶ä¼ è¾“ä»¥è¾¾åˆ°ç”¨æˆ·æ”¶åˆ°æ–‡ä»¶åŽç«‹å³åˆ é™¤è§£åŽ‹åŽçš„æ–‡ä»¶çš„ç›®çš„ã€‚å•çº¯çš„ä½¿ç”¨ res.set_content() ä¼šå¯¼è‡´ç”¨æˆ·æ”¶åˆ°æ–‡ä»¶ä¹‹å‰å·²è§£åŽ‹çš„æ–‡ä»¶å°±å·²è¢«åˆ é™¤ã€‚
### get_content_type.cpp
æ— åºå›¾ç”± GPT-5 ç”Ÿæˆï¼Œæä¾› content-type çš„ç´¢å¼•
## å¿ƒè·¯åŽ†ç¨‹
è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡æŽ¥è§¦åŽç«¯ï¼Œç¬¬ä¸€æ¬¡æ‹¿C++å†™è¶…è¿‡100è¡Œå¤šæ–‡ä»¶é¡¹ç›®ï¼ˆè¿˜æ˜¯å¤ªèœäº†ï¼‰  
å‰æœŸ response_parse() å†™çš„æˆ‘æ€€ç–‘äººç”Ÿï¼Œä½†æ˜¯çœ‹åˆ°ç¬¬ä¸€ä¸ªæˆåŠŸè§£æžå‡ºæ¥çš„å…¥å£æ–‡ä»¶æ˜¾ç¤ºåœ¨æµè§ˆå™¨è¿˜æ˜¯å¾ˆæœ‰æˆå°±æ„Ÿçš„ã€‚  
æ„Ÿè°¢ Open AI GPT-5 ã€ Google Gemini 2.5 Pro ã€Stack overflow å’Œ cppreference å¸®åŠ©æˆ‘æŸ¥æ‰¾èµ„æ–™ï¼Œæ„Ÿè°¢ Rikka åœ¨æˆ‘æ‘¸é±¼çš„æ—¶å€™å’Œæˆ‘é—²èŠï¼ˆï¼‰è®©æˆ‘æ²¡é‚£ä¹ˆå¯‚å¯žã€‚
